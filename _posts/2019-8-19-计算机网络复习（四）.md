---
layout:     post
title:      计网复习（三）
subtitle:   网络层
date:       2019-8-19
author:     Gavin
header-img: img/post-bg-miui6.jpg
catalog: true
tags:
    - 计算机网络
---

> 花叶千年不相见
> 
> 缘尽缘灭舞翩跹

# 概念

1. 数据链路层主要负责***互联网任意两台主机之间的分组传送***
2. 两种思路
	+ 虚电路服务（可靠交付）
	+ 数据报服务（简单灵活、无连接、尽最大努力交付）
3. ***网际协议IP***
	配套协议：  
	
	+ 地址解析协议ARP  
		解析*IP地址*为*MAC地址*，每一个主机都设有一个ARP高速缓存，其中保存局域网上各主机和路由器IP地址到硬件地址的映射表
	+ 网际报文控制协议ICMP（PING、Traceroute）   
		允许主机或路由器报告异常或差错情况（*封装在IP数据报中*）  
		错误类型：  
		
		+ 源点抑制（阻塞）
		+ 终点不可达
		+ 重定向
		+ 参数问题
	+ 网际组管理协议IGMP  
		让连接在本地局域网上的多播路由器知道本局域网是否有主机参与多播组

4. IP地址编址方案
	+ 分类IP
		+ A类（8位网络号，0）
		+ B类（16位网络号，10）
		+ C类（24位网络号，110）
		+ D类（1110，多播地址）
		+ E类（1111，保留使用）
		![](http://45.32.68.50/large/006tNc79ly1g6440ap1pij30im056wf5.jpg)
	+ 子网划分  
		将主机号拆分为*子网号*+*主机号*  
		优点：
		
		+ 减少了IP地址的浪费
		+ 使网络组织更加灵活
		+ 便于维护和管理
		![](http://45.32.68.50/large/006tNc79ly1g6440ap1pij30im056wf9.jpg)		
	+ 构成超网（*无分类编址CIDR*）  
		*变长子网掩码VLSM*  
		最长前缀匹配
5. ***互联网路由选择协议***
	+ 静态路由选择（非自适应）
	+ 动态路由选择（自适应）

	两大协议：  
	
	+ 内部网关协议IGP
		+ 路由信息协议RIP  
			分布式的基于*距离向量*的路由选择协议  
			+ 仅和相邻路由器交换信息
			+ 交换本路由器知道的全部信息，即路由表
			+ 按固定时间间隔交换信息
			![](http://45.32.68.50/large/006tNc79ly1g6440ap1pij30im056wf0.jpg)
		+ 开放最短路径优先协议OSPF  
			分布式的*链路状态*协议
			+ 向自治系统中所有路由器发送信息（洪泛法）
			+ 发送的是与本路由器相邻的所有路由器的链路状态
			+ 链路状态发生变化时，即更新
	+ 外部网关协议EGP  
		找到*比较好（不兜圈子）*的路由，不求最好
		+ BGP-4
			+ 打开报文
			+ 更新报文
			+ 保活报文
			+ 通知报文
6. IPV4过渡到IPV6
	+ 双协议栈
	+ 隧道技术
7. IP多播  
	支持一对多通信  
	***多播地址只能用于目的地址，不能用于源地址***
8. 虚拟专用网VPN
9. 网络地址转换NAT

---

# 注意

1. IP地址特征
	+ IP地址是一种分等级的地址结构
	+ IP地址是标志一个主机（路由器）和一条链路的接口（路由器至少有两个IP）
	+ 用转发器或网桥连接起来的局域网同属一个网络，具有相同的net-id
	+ 所有分配到相同net-id的网络，不论范围，都是平等的
2. IP地址与硬件地址
	+ 硬件地址是*物理层*和*数据链路层*使用的地址
	+ IP地址是网络层及其以上层使用的*逻辑地址*
3. 不应发送ICMP报文的情况
	+ 对ICMP差错报文不再发送ICMP差错报文
	+ 对第一个分片的数据报片后的所有后续报片不再发送ICMP差错报文
	+ 对多播地址数据报不发送ICMP差错报文
	+ 对特殊地址（localhost）不发送
4. ICMP报文种类
	+ 询问报文
		+ 回送请求和回答
		+ 时间戳请求和回答
	+ 差错报文
		+ 源点抑制（阻塞）
		+ 终点不可达
		+ 重定向
		+ 参数问题
5. 理想的路由选择算法
	+ 正确和完整
	+ 计算上简单
	+ 适应通信量和网络拓扑变化，自适应性
	+ 稳定性
	+ 公平的
	+ 最佳的
6. 自治系统（AS）  
	单一技术管理下的一组路由器
7. *RIP协议好消息传的快，坏消息传的慢*
8. RIP的优缺点
	优点：  
	
	+ 实现简单，开销小

	缺点：  
	
	+ RIP限制了网络规模，最大距离为15，16即不可达
	+ 网络规模越大，开销越大
	+ 坏消息传的慢
9. ***IPV6只能使用一次零压缩***